<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="base/layout">

<head>
    <title>角色管理</title>
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css">

</head>
<body>
<div layout:fragment="content" >
    <!-- page content -->
    <div class="right_col" role="main">

        <div class="">
            <div class="clearfix"></div>

            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <h2>角色列表</small></h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a><i class="fa fa-plus"></i></a>
                            </li>
                            <li><a><i class="fa fa-edit"></i></a>
                            </li>
                            <li><a><i class="fa fa-close"></i></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <table id="role_table" class="table table-striped table-bordered bulk_action">
                            <thead>
                            <tr>
                                <th>role</th>
                                <th>description</th>
                            </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="clearfix"></div>
        </div>
    </div>
    <!-- /page content -->
</div>

</body>
    <!-- DataTables -->

    <script type="text/javascript" charset="utf8" src="/resources/plugins/datatables.net/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" charset="utf8" src="/resources/plugins/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
</html>
<script type="text/javascript">
    $(document).ready(function() {
        $("#role_table").DataTable({
            "bProcessing": false, // 是否显示取数据时的那个等待提示
            "bServerSide": true,//这个用来指明是通过服务端来取数据
            "sAjaxSource": "/role/list",//这个是请求的地址
            "fnServerData": retrieveData, // 获取数据的处理函数
            columns: [
                {data: "role"},
                {data: "description"}
            ]
        });
    });

    // 3个参数的名字可以随便命名,但必须是3个参数,少一个都不行
    function retrieveData( sSource,aoData, fnCallback) {
        $.ajax({
            url : sSource,//这个就是请求地址对应sAjaxSource
            data : {"aoData":JSON.stringify(aoData)},//这个是把datatable的一些基本数据传给后台,比如起始位置,每页显示的行数
            type : 'post',
            dataType : 'json',
            async : true,
            success : function(result) {
                fnCallback(result);//把返回的数据传给这个方法就可以了,datatable会自动绑定数据的
            },
            error : function(msg) {
            }
        });
    }
</script>

